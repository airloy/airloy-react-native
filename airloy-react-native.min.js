import{Device as e,Event as n,Store as t}from"airloy";import{AsyncStorage as i,Platform as r}from"react-native";import c from"RCTDeviceEventEmitter";function __async(e){return new Promise(function(n,t){function i(c,o){try{var x=e[o?"throw":"next"](c)}catch(e){t(e);return}x.done?n(x.value):Promise.resolve(x.value).then(i,r)}function r(e){i(e,1)}i()})}class o extends e{constructor(e){super(e);this._init()}_init(){return __async(function*(){let e=yield yield i.getItem("airloy.device.id");if(e){this._identifier=e}else{this._identifier=r.OS+"^react-native^"+this.createGuid();i.setItem("airloy.device.id",this._identifier)}}.call(this))}createGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,t=e==="x"?n:n&3|8;return t.toString(16)})}getIdentifier(){return this._identifier}}class x extends n{on(e,n){c.addListener(e,n)}once(e,n){c.once(e,n)}_off(e){c.removeAllListeners(e)}emit(e,...n){c.emit(e,...n)}}class u extends t{getItem(e){return __async(function*(){let n=yield i.getItem(e);return n}())}setItem(e,n){i.setItem(e,n)}removeItem(e){i.removeItem(e)}}let f={install(e){e.store=new u;e.device=new o;e.event=new x}};export default f;